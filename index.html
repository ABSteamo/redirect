<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>روابط مع حماية من العبث</title>
  <style>
    .item { margin-bottom: 30px; }
    .iframeArea { display: none; }
  </style>
</head>
<body>
  <h1>روابط تحميل وفيديو مع حماية احتياطي</h1>
  <div id="links"></div>
  <script>
    // الروابط هنا!
    const items = [
      {
        name: "فيديو 1",
        main: "https://example.com/video1",
        fallback: "https://backup.com/video1"
      },
      {
        name: "تطبيق 1",
        main: "https://example.com/app1",
        fallback: "https://backup.com/app1"
      }
    ];

    function tryMainLink(mainUrl, container) {
      let iframe = document.createElement('iframe');
      iframe.className = 'iframeArea';
      container.appendChild(iframe);
      // زر الاحتياطي غير موجود بعد
      let fallbackBtn = null;
      // جرب التحميل
      iframe.src = mainUrl;
      iframe.style.display = 'block';
      // بعد 5 ثواني، إذا لم يحمل، أبني زر الاحتياطي
      const fallbackTimer = setTimeout(() => {
        fallbackBtn = document.createElement('button');
        fallbackBtn.textContent = "الرابط الاحتياطي";
        fallbackBtn.onclick = () => window.open(container.dataset.fallback, '_blank');
        container.appendChild(fallbackBtn);
        alert("الرابط الأساسي لم يعمل، جرب الرابط الاحتياطي!");
      }, 5000);
      // إذا حمل بنجاح
      iframe.onload = function() {
        clearTimeout(fallbackTimer);
        alert("تم تحميل الرابط الأساسي!");
        iframe.remove();
      };
    }

    // بناء عناصر الصفحة
    const container = document.getElementById('links');
    items.forEach(item => {
      const div = document.createElement('div');
      div.className = 'item';
      div.dataset.fallback = item.fallback;
      div.innerHTML = `
        <h3>${item.name}</h3>
        <button onclick="window.open('${item.main}','_blank')">الرابط الأساسي</button>
        <button onclick="tryMainLink('${item.main}', this.parentNode)">جرب الرابط الأساسي</button>
      `;
      container.appendChild(div);
    });

    window.tryMainLink = tryMainLink;
  </script>
</body>
</html>
